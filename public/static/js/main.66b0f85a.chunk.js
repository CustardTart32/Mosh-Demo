(this.webpackJsonpmosh=this.webpackJsonpmosh||[]).push([[0],{122:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA3gAAAN4B3eqDagAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAUzSURBVFiFrVdbbBRVGP7+mTmzs7vddukFI9BCwrK7Cgpe0USJGDEY9EGCEvRBQ3zwAWJijA8QicZoTIwxavBF4wPxrvHNIDFipA2JXFSIiRa7lG4LxW4rLd3L7M6c8/uwdDp7a7fVP5lkzn/9/nP+/1yImdEspVKpGBm0STnqJgA3M3idUkoS6LSCOg3CKYOMn2OxWKZZn9QMgIGBgYBpml/ruv4wEVXIXNdFwS74WQUC7Y/H4+8AUP8ZwNDQ0HZd1z/WNC1YT66UQi6fqyfq0zX96Vgsllo0gMHBwT2BQOBdx3VISunxdV2HMARCoRAYjKJdRMEuoFQqVTpg5IloRzweP7xgACMjIxuJ6DgRadlcFswMIQSWRJdACAEighCiwsZ1XWTGM7BtezYA6G+l1NpkMjlRL47WMH3gOyLSAMAKWIi2RbG0a6kXlJlx6Uoeo5MFuK4L13UBAJ0dneho7/BNAl9HGh1sFKQugAsXLryuaVp0ZhwMBhEOh2v03u+7jIO9o1BKeR8zo7W1FdFo1K+6s7+/f0fTAHRdf85T0DRYllWjU3QZJ9JZnEhnUZLl5RFCwDRNAEC0LVq5RIQDTQEYHh5ep+t6aGYcCARQ3XoAcDKdhe0o2I7CqeEciKhCj4jQ2dHpN7nx7NmzNdNoVDOYeVuFglFWuThVglKzBfvDX1Pe//f9k+huEz4bHSs7Qt5sXCPdsqxbAPTNCQDAPf4siAipcRvPfnkejRq2N3UVvamr3pgAfPhkAmu6ghBCwHGcGdEd1QBqloCIEh5kXQcArO608MYjK9Eeqoe3ktrDAm9tX401XeV9K2AG/OL11fo1AJRSGd+/x7+tO4wPdq7GxpUtDYPftSqCj55Yg9t7Ih7Pla73z8wj8wIgopN+AP6Nqi2o45WHumGJ2uaxhIaXt65Ai5gFzswoFot+tZPVdjWeNE074h/7ZwEAzlzMw3ZqzxjbUfj9chGGYUDTym5d161IgIhOzQvAtu2jzOxFqMoAvedni23rDVFsW9vujY+lprzgADA5Nek3HY3H4xfnBRCLxYpSSq9SXdf1qpgZ6Ds/jZCpYd+W5Xhh8zI8f9/12P/gCoRMDccGplAqOWBm2LaNbDY7mz3o0+pYQP02hOM4jxmGcQmADgC2bZczIw13r2rBrls7sazNvAaKsTnWikSXhc9+GYdUCqpYxFhmzO/yXCgUeqlerIan4dDQ0GtCiH1AuQ7yhTwiLRFEIrMVXu9EzOVyyIxn/GuvWPG9yWTy+IIAAEA6nf7JMIxNzIxCoQCpJIQQsCwLpjBhmiaEEJBSolgsYjo7XVMzYLyZSCRebBRjvhuRlk6njxiG8cBcSlJK5Av5anZTV7O57gMAoHp6erZIKXc5UhYbKem6XnEQZfJqlBVviMfjb88VHGhQhNXU3d39+eOH+t1H4+Krngih1QRafEvvSonRaYnBKxJ/jLs4MYYvfty74VwzvpsCAAA5Zv7kz3I7KsXQpYPlkXLWI1cZE1O2V3jBYEA2dLRYAH6yCyXkczYyVxZjvUgAmiLia8scCgdgCB1g9o5ou1CCUyofPIqaf+00DYAJFdci0yybMjOU4ootmFj9/wAa0T8T01hAvBqarw09qp4BACDmX1vC1qBh6JV86PM+yRYMoIpsYt6XTV++0x2biLdGW16tc29tihZYhAwQ+qTEM4d3J/uB5Iz4wP3vnfmt5LiHXFeGwQ2vj7V+m1VkjbJMtOfbpxKbDu9O9FfLj+5d/82y7mB7ICAOg1D3tVqP/gVVRTqamQqDaQAAAABJRU5ErkJggg=="},123:function(e,t){e.exports="data:image/png;base64,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"},124:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA3QAAAN0BcFOiBwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQISURBVFiF7ZbNa1xVFMB/5743b96bzKRmqvkg/UhMU/sRUdt0YQU/NgXFIi6ECoUSunBj/wAXiiAiuLILXbgoilLUpf9ARfCrUAtpUmhtWmwa+kGY2KaZN3lv7r0ukpl5M30zTouIi57Nu3Puvef87rnnnDtiraVbuXR4vLecye0X7D4sk8DkXytxvwglR3FeRP3gBOrEvhPn5ru1Kd0CTE89dVCs/RwYTOpLKxFJE0owmYzz8bMnZ9/5VwDOvDW5wYui41iOpM23AtQk46g5r8d56Z+i0RHg0uHx3tANzgKPt85VjaWqLfOLGj9jCbIg0rzGURL7eXesE4TbiS50g09anZcjTSXS1LCv3VJoI4hAf59lqGjrINrYTLSiTwHb2vlQ7SZmjjz5KjBV+62N5XY5Jkw4T4q1cLMkXJhXrMYNfazN2K9vTnzQzk/qFVw4uqMQae8iiYS7XY6pmnvXTs8ptGnWBVl4YrOpR0IJpsdXm/Z+df566/7UCFRif3/SeTnSqc7bSbgKN0qNhDAWFVdlKm1tKoCI3dsEFOn6+NEBj13PFFAKhrf6vH4gAuD5p5fZvrlSX3drSZqqwxj7YtcAQB2gamzTnQ8O+/QPZcn1uAxvDdiYW6Y3r9kxUmHnaAPAWAijBAB294MB6JbQS+Jbu+P1QWsZliuJazD0dw0gYusxl7QFXUpyr0hq8bSNwJnawHFaEGziuz6uFUFrQeX8hkLgZpqj9EYk/I7lDQBXCZLwu3A1pFo1rNytMn8lJOv2cueuYuZywK1SpnEyAd9rmFSK2a4BBHvGJgIYeA7l9UpYWoxZWlzrNNfnK0zPrTn9eTrfZGMg0RHXgORUmq/UK1Ar9hdgIQngqu6zIZeFgb5G+JWg8+J80TXAru9m7hqjjiZ1Bd/tCiLnw+iQaTq966r3J06eS82Bjq/hn8f2XrqzHI8ldWGkCWNdT7haK1Zq7dQDfc2h7/WdeM/Xsx5tpONruGkwuDK3qsdWo0azDzyHwHPQxlI1li0DGt+zTQlXN66EnUOZ5U4+2r6GAI4SvW0kT/GRe607Ssi6ir5CuvNeX7FnUwbPEXPvbAKy0ySAUsLwYMCGQoZrN0LiuKM9lAgjRYehQsezdQ9Qk3yPy/bRPOHlMuWLZcKCIiwolAUnMjh3Vnms4DE0HuB25/v+AGAtGj2i6LnWeGWihQW0WYtK8YVhXBXcj8nOOfBfyEOAhwD/cwChfdfp90rszr89PDnwbb7gt39Q2vwTqknnPmDtWURebtLl1Gkmcl/y/cxnAEX4tAiHSs9t+SbT778CFJpMIH88OEBU+ZBsbgzsAeA3RH3E8dM/pi0t/nT1EIB5d/KYifV7VpuN4qqFMFavFdI2rMvfhIZ3QW8eEAMAAAAASUVORK5CYII="},142:function(e,t,n){e.exports=n.p+"static/media/heart.751a7f6d.svg"},143:function(e,t,n){e.exports=n.p+"static/media/sync.1e25f806.svg"},144:function(e,t,n){e.exports=n.p+"static/media/track.ab3c2deb.svg"},145:function(e,t,n){e.exports=n.p+"static/media/spotify.36e17e9c.svg"},146:function(e,t,n){e.exports=n.p+"static/media/youtube.ff90d29b.svg"},165:function(e,t,n){e.exports=n(201)},170:function(e,t,n){},201:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(19),i=n.n(o),l=(n(170),n(14)),c=n(15),s=n(17),u=n(16),m=n(51),d=n(18),p=n(8),h=(n(115),n(171),p.initializeApp({apiKey:"AIzaSyAeREgt3YM_FPtwhYnMWF_AijkdYwyykR0",authDomain:"mosh-37501.firebaseapp.com",databaseURL:"https://mosh-37501.firebaseio.com",projectId:"mosh-37501",storageBucket:"mosh-37501.appspot.com",messagingSenderId:"806342003387",appId:"1:806342003387:web:f508ba713ee85e2683f79e",measurementId:"G-QVRJRKC8QL"})),f={signInFlow:"popup",signInOptions:[p.auth.FacebookAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(e){var t=h.firestore();return t.collection("users").doc(e.user.uid).get().then((function(n){n.exists||(console.log("Adding user data to firestore"),t.collection("users").doc(e.user.uid).set({connections:[],displayName:e.user.displayName,favAlbum:"ASTROWORLD",favArtist:"Travis Scott",interests:["Hip Hop","Pop"],photoURL:e.user.photoURL,posts:[]},{merge:!0}).catch((function(e){console.log(e.message)})))})),!1}}},g=n(24),b=n(56),v=n(69),E=n(259),y=n(11),A=n.n(y),k=n(26),w=n(10),x=n(244),C=n(245),j=n(65),S=n(243),O=n(129),B=n.n(O),I=n(88),N=n.n(I),T=n(132),D=n.n(T),U=n(68),R=n.n(U),F=n(131),L=n.n(F),P=n(234),Y=n(205),z=n(203),G=n(149),W=n(128),M=n.n(W),Q=n(268),q=Object(P.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)},justifyContent:"center"},large:{width:e.spacing(18),height:e.spacing(18)}}}));function X(e){var t=q();return r.a.createElement("div",{className:t.root},r.a.createElement(Q.a,{alt:e.title,src:e.img,className:t.large}))}var K=n(241),H=n(77),V=n.n(H),Z=n(147),J=n(237),_=n(262),$=Object(P.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:"#292b2a",border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),outline:"none"},root:{display:"flex",alignItems:"center",flexDirection:"column"}}})),ee=Object(Z.a)({palette:{type:"dark"}});function te(e){var t=$(),n=r.a.useState(""),a=Object(w.a)(n,2),o=a[0],i=a[1];return r.a.createElement("div",null,r.a.createElement(Y.a,{className:t.modal,open:e.open,onClose:e.handleClose,closeAfterTransition:!0,BackdropComponent:z.a,BackdropProps:{timeout:500}},r.a.createElement(G.a,{in:e.open},r.a.createElement("div",{className:t.paper,style:{textAlign:"center",display:"flex",flexDirection:"column"}},r.a.createElement(J.a,{theme:ee},r.a.createElement("h2",{style:{color:"#fff"}},"Profile Settings"),r.a.createElement("form",{className:t.root,onSubmit:function(t){t.preventDefault();var n=h.firestore(),a=h.auth();a.currentUser.updateProfile({photoURL:o}).then((function(){n.collection("users").doc(a.currentUser.uid).update({photoURL:o}).then((function(){i(""),e.handleClose()})).catch((function(e){alert(e.message)}))})).catch((function(e){alert(e.message)}))}},r.a.createElement(_.a,{helperText:"Enter URL Here",required:!0,value:o,onChange:function(e){i(e.target.value)}}),r.a.createElement(K.a,{variant:"contained",color:"primary",type:"submit"},"Update Avatar")))))))}var ne=Object(P.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:"#292b2a",border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),outline:"none"},button:{margin:e.spacing(1)}}})),ae=Object(Z.a)({palette:{type:"dark"}});function re(e){var t=ne(),n=r.a.useState(!1),a=Object(w.a)(n,2),o=a[0],i=a[1];return r.a.createElement("div",null,r.a.createElement(Y.a,{className:t.modal,open:e.open,onClose:e.handleClose,closeAfterTransition:!0,BackdropComponent:z.a,BackdropProps:{timeout:500}},r.a.createElement(G.a,{in:e.open},r.a.createElement("div",{className:t.paper,style:{textAlign:"center",display:"flex",flexDirection:"column"}},r.a.createElement(J.a,{theme:ae},r.a.createElement("h2",{style:{color:"#fff"}},"Profile Settings"),r.a.createElement(K.a,{variant:"outlined",className:t.button,endIcon:r.a.createElement(V.a,null)},"Privacy Settings"),r.a.createElement(K.a,{variant:"outlined",className:t.button,endIcon:r.a.createElement(V.a,null)},"Connected Accounts"),r.a.createElement(K.a,{variant:"outlined",className:t.button,endIcon:r.a.createElement(V.a,null),onClick:function(){i(!0)}},"Upload New Profile Picture"),r.a.createElement("div",{style:{marginTop:"20%"}}),r.a.createElement(K.a,{variant:"contained",color:"secondary",className:t.button,endIcon:r.a.createElement(V.a,null)},"Deactivate Account"))))),r.a.createElement(te,{open:o,handleClose:function(){i(!1)}}))}var oe=n(242),ie=Object(P.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function le(e){var t=ie();return r.a.createElement("div",{className:t.root},r.a.createElement(oe.a,{variant:"determinate",value:e.progress,color:"secondary"}))}var ce=n(122),se=n.n(ce),ue=n(123),me=n.n(ue),de=n(124),pe=n.n(de),he=n(97),fe=n.n(he),ge=n(127),be=n.n(ge),ve=n(125),Ee=n.n(ve),ye=n(126),Ae=n.n(ye),ke=Object(P.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:"#292b2a",color:"rgba(255, 255, 255, 0.7)",border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),outline:"none"},achievements:{display:"flex",alignItems:"center",textAlign:"left",justifyContent:"space-between"}}})),we=Object(Z.a)({palette:{type:"dark"}});function xe(e){var t=ke(),n=r.a.createElement(Ee.a,{style:{marginLeft:"2%",color:"green"}}),a=r.a.createElement(Ae.a,{style:{marginLeft:"2%",color:"red"}}),o=function(e,t){return null==e||!1===e[t]?a:n};return r.a.createElement("div",null,r.a.createElement(Y.a,{className:t.modal,open:e.open,onClose:e.handleClose,closeAfterTransition:!0,BackdropComponent:z.a,BackdropProps:{timeout:500}},r.a.createElement(G.a,{in:e.open},r.a.createElement("div",{className:t.paper,style:{textAlign:"center",display:"flex",flexDirection:"column"}},r.a.createElement(J.a,{theme:we},r.a.createElement("h2",{style:{color:"#fff"}},"My Achievements"),r.a.createElement("div",{className:t.achievements},r.a.createElement("p",null," Make a Post "),o(e.achievements,"post")),r.a.createElement("div",{className:t.achievements},r.a.createElement("p",null," Connect With 5 Users "),o(e.achievements,"connections")),r.a.createElement("div",{className:t.achievements},r.a.createElement("p",null," Comment on another user's post "),o(e.achievements,"comment")),r.a.createElement("h4",null," ",function(e){if(null==e)return"Complete one more task to unlock a Bronze medal!!";var t=0;return Object.keys(e).forEach((function(n){!0===e[n]&&(t+=1)})),0===t?"Complete one more task to unlock a Bronze medal!!":1===t?"Complete one more task to unclock a Silver medal!!":2===t?"Complete one more task to unlock a Gold medal!!":"Congrats!! You have completed all tasks!!!"}(e.achievements)," "))))))}var Ce=Object(P.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:"#292b2a",color:"rgba(255, 255, 255, 0.7)",border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),outline:"none"}}}));function je(e){var t=Ce(),n=h.auth().currentUser,o=h.firestore(),i=r.a.useState(!1),l=Object(w.a)(i,2),c=l[0],s=l[1],u=r.a.useState(null),m=Object(w.a)(u,2),d=m[0],p=m[1],f=r.a.useState(!1),g=Object(w.a)(f,2),b=g[0],v=g[1],E=r.a.useState(null),y=Object(w.a)(E,2),A=y[0],k=y[1];Object(a.useEffect)((function(){if(null!=n.uid){var e=o.collection("users").doc(n.uid).onSnapshot((function(e){null!=e&&p(e.data())}));return function(){e()}}}),[n,o]);return Object(a.useEffect)((function(){var e={};if(null!=d){d.posts.length>=1?e.post=!0:e.post=!1,d.connections.length>=5?e.connections=!0:e.connections=!1;var t=h.firestore().collection("users").doc(h.auth().currentUser.uid),n=h.firestore().collection("comments").where("userRef","==",t).onSnapshot((function(t){t.empty?e.comment=!1:e.comment=!0,k(e)}));return function(){n()}}k(e)}),[d]),r.a.createElement("div",null,r.a.createElement(Y.a,{className:t.modal,open:e.open,onClose:e.handleClose,closeAfterTransition:!0,BackdropComponent:z.a,BackdropProps:{timeout:500}},r.a.createElement(G.a,{in:e.open},r.a.createElement("div",{className:t.paper,style:{textAlign:"center"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(S.a,{onClick:function(){e.handleClose()}},r.a.createElement(be.a,{style:{color:"white"}}))),r.a.createElement(X,{img:n.photoURL}),r.a.createElement("h2",{style:{color:"#fff",marginBottom:"0"}},n.displayName),r.a.createElement("h3",{style:{marginBottom:"0"}}," My Achievement Progress "),r.a.createElement(S.a,{onClick:function(){v(!0),e.handleClose()}},function(e){if(null==e)return r.a.createElement("img",{src:fe.a,style:{marginBottom:"2%"},alt:""});var t=0;return Object.keys(e).forEach((function(n){!0===e[n]&&(t+=1)})),0===t?r.a.createElement("img",{src:fe.a,style:{marginBottom:"2%"},alt:""}):1===t?r.a.createElement("img",{src:pe.a,style:{marginBottom:"2%"},alt:""}):2===t?r.a.createElement("img",{src:se.a,style:{marginBottom:"2%"},alt:""}):r.a.createElement("img",{src:me.a,style:{marginBottom:"2%"},alt:""})}(A)),r.a.createElement(le,{progress:function(e){if(null==e)return 0;var t=0,n=0;return Object.keys(e).forEach((function(a){!0===e[a]&&(t+=1),n+=1})),Math.ceil(t/n*100)}(A)}),r.a.createElement("p",null,r.a.createElement("b",null,"Interests")," : ",function(e){if(null==e)return"";var t="";return e.forEach((function(e){t+=e+" "})),t}(null==d?null:d.interests)," "),r.a.createElement("p",null,r.a.createElement("b",null,"Favourite Album")," : ",null!=d?d.favAlbum:""," "),r.a.createElement("p",null,r.a.createElement("b",null,"Favourite Artist")," : ",null!=d?d.favArtist:""," "),r.a.createElement(S.a,{onClick:function(){s(!0),e.handleClose()},style:{color:"inherit"}},r.a.createElement(M.a,null))))),r.a.createElement(re,{open:c,handleClose:function(){s(!1),e.handleOpen()}}),r.a.createElement(xe,{open:b,handleClose:function(){v(!1),e.handleOpen()},achievements:A}))}var Se=Object(P.a)((function(e){return{iconButton:{color:"inherit",paddingLeft:e.spacing(.25),paddingRight:e.spacing(.25)}}}));var Oe=function(e){var t=Se(),n=r.a.useState(!1),a=Object(w.a)(n,2),o=a[0],i=a[1],l=function(){i(!0)},c=function(){var e=Object(k.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gapi.auth.setToken(null),gapi.auth.signOut(),h.auth().signOut().then((function(){console.log("user signed out")})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(x.a,{position:"fixed",className:e.appBar,style:{background:"#303030",boxShadow:"none"}},r.a.createElement(C.a,null,r.a.createElement(S.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:e.handleDrawerToggle,className:e.menuButton},r.a.createElement(B.a,null)),r.a.createElement(j.a,{variant:"h6",style:{flexGrow:1}},r.a.createElement(g.b,{to:"/home/token/"+e.token,style:{textDecoration:"none",color:"inherit "}},"Mosh")),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement("div",{style:{textDecoration:"none",color:"white ",margin:"5px"},onClick:l},r.a.createElement(S.a,{className:t.iconButton},r.a.createElement(L.a,null))),r.a.createElement(g.b,{to:"/discover/token/"+e.token,style:{textDecoration:"none",color:"inherit ",margin:"5px"}},r.a.createElement(S.a,{className:t.iconButton},r.a.createElement(N.a,null))),r.a.createElement(g.b,{to:"/share/token/"+e.token,style:{textDecoration:"none",color:"inherit",margin:"5px"}},r.a.createElement(S.a,{className:t.iconButton},r.a.createElement(R.a,null))),r.a.createElement("div",{style:{textDecoration:"none",color:"inherit",margin:"5px"}},r.a.createElement(S.a,{onClick:c,className:t.iconButton},r.a.createElement(D.a,null))))),r.a.createElement(je,{open:o,handleOpen:l,handleClose:function(){i(!1)}}))},Be=n(267),Ie=n(264),Ne=n(240),Te=n(246),De=n(248),Ue=n(250),Re=n(249),Fe=n(263),Le=n(247),Pe=n(133),Ye=n.n(Pe),ze=n(134),Ge=n.n(ze),We=n(89),Me=n.n(We),Qe=n(135),qe=n.n(Qe),Xe=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"renderButton",value:function(e){var t,n,a=this;return"music"===e?(t=r.a.createElement(Ye.a,null),n="Music"):"concerts"===e?(t=r.a.createElement(Ge.a,null),n="Concerts"):"people"===e?(t=r.a.createElement(qe.a,null),n="People"):"shared"===e&&(t=r.a.createElement(R.a,null),n="Shared With Me"),r.a.createElement(g.b,{to:"/discover/"+e.toLowerCase()+"/"+this.props.token,key:e,style:{textDecoration:"none",color:"inherit"}},r.a.createElement(Te.a,{button:!0,onClick:function(t){return a.props.handleSelection(t,e)},selected:this.props.selectedTag===e},r.a.createElement(Le.a,{style:{color:"inherit"}},t),r.a.createElement(De.a,{primary:n,style:{color:"inherit"}})))}},{key:"renderButtons",value:function(){var e=this;return this.props.primaryTags.map((function(t){return e.renderButton(t)}))}},{key:"render",value:function(){return r.a.createElement(Ne.a,{component:"nav","aria-label":"main list",style:{flexGrow:1}},r.a.createElement(Re.a,{style:{textAlign:"center",paddingBottom:"2%",color:"inherit"}},r.a.createElement(De.a,{primary:"Discover"})),r.a.createElement(Ue.a,null),this.renderButtons())}}]),t}(r.a.Component),Ke=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Fe.a,{style:{color:"inherit"}},r.a.createElement(Ue.a,null),r.a.createElement(Ne.a,{component:"nav","aria-label":"secondary list"},r.a.createElement(g.b,{to:"/discover/connections",style:{textDecoration:"none",color:"inherit"}},r.a.createElement(Te.a,{button:!0,onClick:function(t){return e.props.handleSelection(t,"connections")},selected:"connections"===this.props.selectedTag},r.a.createElement(Le.a,{style:{color:"inherit"}},r.a.createElement(Me.a,null)),r.a.createElement(De.a,{primary:"Your Connections"})))))}}]),t}(r.a.Component),He=n(38),Ve=n.n(He),Ze=n(90),Je=n.n(Ze),_e="AIzaSyBhklDEhDYrLwf5mMkLKsA34Btqjpj8S7k",$e="542831090816-nvuicfih0d0ulh87cjinkfrmg1tlfciq.apps.googleusercontent.com",et=["email","profile","https://www.googleapis.com/auth/youtube.readonly"],tt=["https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest"];function nt(e){return at.apply(this,arguments)}function at(){return(at=Object(k.a)(A.a.mark((function e(t){var n,a,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=20;break}if(void 0!==(n=window.gapi)){e.next=4;break}return e.abrupt("return","undefined");case 4:if(n.client.init({apiKey:_e,clientId:$e,discoveryDocs:tt,scope:et.join(" ")}),console.log("loaded firebase",0),a=n.auth2.getAuthInstance(),console.log(a.isSignedIn.get()),!a.isSignedIn.get()){e.next=13;break}return a.currentUser.get(),e.abrupt("return","SignedIn");case 13:return e.next=15,a.signIn().then(Object(k.a)(A.a.mark((function e(){var t,n,r,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SIGNING IN"),t=a.currentUser.get(),n=t.getBasicProfile(),console.log("gapi: user signed in!",{name:n.getName(),imageURL:n.getImageUrl(),email:n.getEmail()}),r=t.getAuthResponse(!0),o=Je.a.auth.GoogleAuthProvider.credential(r.id_token,r.access_token),e.next=8,h.auth().signInWithCredential(o).then((function(e){var t=e.user;console.log("firebase: user signed in!",{displayName:t.displayName,email:t.email,photoURL:t.photoURL})})).then((function(){console.log("rerender")}));case 8:case"end":return e.stop()}}),e)}))));case 15:return r=e.sent,console.log(r),e.abrupt("return","SignedIn");case 18:e.next=21;break;case 20:console.log("gapi: user is not signed in");case 21:return e.abrupt("return","finished");case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e){return ot.apply(this,arguments)}function ot(){return(ot=Object(k.a)(A.a.mark((function e(t){var n,a,r,o,i,l,c,s,u;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],void 0!==(r=window.gapi)){e.next=4;break}return e.abrupt("return");case 4:return o=r.auth2.getAuthInstance().currentUser.get().getAuthResponse(!0).access_token,i=t,c={access_token:o,key:_e,part:"snippet,id",maxResults:10,myRating:"like"},s=Object.keys(c).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(c[e])})).join("&"),u="https://www.googleapis.com/youtube/v3/videos?"+s,e.next=11,fetch(u).then((function(e){return e.json()})).then((function(e){if(null==e.items)return"error";a=e.items.filter((function(e){return"10"===e.snippet.categoryId})).map((function(e){return e.id})),l=e.items.filter((function(e){return"10"===e.snippet.categoryId})).map((function(e){return e.snippet.title}))})).then(function(){var e=Object(k.a)(A.a.mark((function e(t){var r,o,c,s,u;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",t);case 2:if("tags"!==i){e.next=8;break}o=function(){return(o=Object(k.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],l.forEach((function(e){t.push(e.split(" -")[0])})),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},r=function(){return o.apply(this,arguments)}(),e.next=15;break;case 8:return c={key:_e,part:"snippet",maxResults:10,type:"video",relatedToVideoId:a[0],topicId:"/m/04rlf",q:"Official Music Video"},console.log(a[0]),s=Object.keys(c).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(c[e])})).join("&"),u="https://www.googleapis.com/youtube/v3/search?"+s,e.next=14,fetch(u).then((function(e){return e.json()})).then((function(e){if(console.log(e),null!=e.items){if(console.log(i),"tags"===i){var t=e.items.map((function(e){return e.snippet.title})),n=[];t.forEach((function(e){n.push(e.split(" -")[0])}));var a=n.filter((function(e,t){return n.indexOf(e)===t}));return console.log(a),n=a}t=e.items.map((function(e){return e.snippet})),console.log(t);var r=e.items.map((function(e){return e.id.videoId}));console.log(r);return e.items}console.log(e)}));case 14:r=e.sent;case 15:n=r;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var it=new Ve.a,lt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).getTopArtists=Object(k.a)(A.a.mark((function e(){var t,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){return(a=Object(k.a)(A.a.mark((function e(){var t,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){return(n=Object(k.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt("tags");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},t=function(){return n.apply(this,arguments)},window.gapi){e.next=4;break}return e.abrupt("return");case 4:if(window.gapi.auth2.getAuthInstance()){e.next=6;break}return e.abrupt("return");case 6:if(window.gapi.auth2.getAuthInstance().isSignedIn.get()){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,nt(!1);case 10:return e.abrupt("return",t());case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)},t=function(){return a.apply(this,arguments)},"undefined"!==n.state.token&&n.state.token&&it.getMyTopArtists().then((function(e){e.items.map((function(e){return n.state.list.push(e.name)})),n.props.rerenderCallback(n.state.list)}),(function(e){console.error(e)})),e.next=5,t().then((function(e){return void 0===e&&(e=[]),e.map((function(e){return n.props.rerenderCallback(e)})),e}));case 5:case"end":return e.stop()}}),e)}))),n.state={token:n.props.primaryTags,list:[],youtubelist:[],gapi:window.gapi,finished:!1},n.state.token&&it.setAccessToken(n.state.token),n.getTopArtists(),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"renderButton",value:function(e){var t=this;return r.a.createElement(g.b,{to:"/home/artist/".concat(e.replace(/\s+/g,"")),key:e,style:{textDecoration:"none",color:"inherit"}},r.a.createElement(Te.a,{button:!0,onClick:function(n){return t.props.handleSelection(n,e)},selected:this.props.selectedTag===e},r.a.createElement(De.a,{primary:e})))}},{key:"renderButtons",value:function(){var e=this;return this.props.state.artists.filter((function(t,n){return e.props.state.artists.indexOf(t)===n})).map((function(t){return e.renderButton(t)}))}},{key:"render",value:function(){return r.a.createElement(Ne.a,{component:"nav","aria-label":"main list",style:{flexGrow:1}},r.a.createElement(Re.a,{style:{textAlign:"center",paddingBottom:"2%",color:"inherit"}},r.a.createElement(De.a,{primary:"Your Top Artists"})),r.a.createElement(Ue.a,null),r.a.createElement("div",null,this.renderButtons()))}}]),t}(r.a.Component),ct=(r.a.Component,function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e;return e=window.location.pathname.startsWith("/discover")?r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe,{primaryTags:["music","people","shared"],token:this.props.token,handleSelection:this.props.handleSelection,selectedTag:this.props.selectedTag}),r.a.createElement(Ke,{selectedTag:this.props.selectedTag,token:this.props.token,handleSelection:this.props.handleSelection})):r.a.createElement(r.a.Fragment,null,r.a.createElement(lt,{primaryTags:this.props.primaryTags,state:this.props.state,rerenderCallback:this.props.rerenderCallback,handleSelection:this.props.handleSelection,selectedTag:this.props.selectedTag})),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ie.a,{smUp:!0,implementation:"css"},r.a.createElement(Be.a,{container:this.props.container,variant:"temporary",anchor:"left",open:this.props.open,onClose:this.props.handleDrawerToggle,classes:{paper:this.props.drawerPaper},ModalProps:{keepMounted:!0}},r.a.createElement("div",{className:this.props.toolbar}),e)))}}]),t}(r.a.Component)),st=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e;return e=window.location.pathname.startsWith("/discover")?r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe,{primaryTags:["music","people","shared"],token:this.props.token,handleSelection:this.props.handleSelection,selectedTag:this.props.selectedTag}),r.a.createElement(Ke,{selectedTag:this.props.selectedTag,token:this.props.token,handleSelection:this.props.handleSelection})):r.a.createElement(r.a.Fragment,null,r.a.createElement(lt,{primaryTags:this.props.primaryTags,state:this.props.state,rerenderCallback:this.props.rerenderCallback,handleSelection:this.props.handleSelection,selectedTag:this.props.selectedTag})),r.a.createElement(Ie.a,{xsDown:!0,implementation:"css"},r.a.createElement(Be.a,{classes:{paper:this.props.drawerPaper},variant:"permanent",open:!0},r.a.createElement("div",{className:this.props.toolbar}),e))}}]),t}(r.a.Component),ut=n(6),mt=n(251),dt=n(253),pt=n(252),ht=n(136),ft=n.n(ht),gt=Object(P.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:"#292b2a",color:"rgba(255, 255, 255, 0.7)",border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),outline:"none"}}}));function bt(e){var t=gt();return r.a.createElement(Y.a,{className:t.modal,open:e.open,onClose:e.handleClose,closeAfterTransition:!0,BackdropComponent:z.a,BackdropProps:{timeout:500}},r.a.createElement(G.a,{in:e.open},r.a.createElement("div",{className:t.paper,style:{textAlign:"center"}},r.a.createElement(X,{img:e.img}),r.a.createElement("h2",{style:{color:"#fff"}},e.title),r.a.createElement("p",null,r.a.createElement("b",null,"Interests")," : ",e.interests," "),r.a.createElement("p",null,r.a.createElement("b",null,"Favourite Album")," : ",e.favAlbum," "),r.a.createElement("p",null,r.a.createElement("b",null,"Favourite Artist")," : ",e.favArtist," "),r.a.createElement("p",null,r.a.createElement("b",null,"Resides In")," : Australia "),r.a.createElement("p",null,r.a.createElement("b",null,"Connected Platforms")," : Facebook, Spotify, Apple Music"),r.a.createElement(K.a,{variant:"contained",color:e.connected?"secondary":"primary",onClick:e.connected?function(t){return function(e,t){var n=h.firestore(),a=n.collection("users").doc(h.auth().currentUser.uid),r=n.collection("users").doc(t);a.update({connections:p.firestore.FieldValue.arrayRemove(t)}),r.update({connections:p.firestore.FieldValue.arrayRemove(h.auth().currentUser.uid)})}(0,e.id)}:function(t){return function(e,t){var n=h.firestore(),a=n.collection("users").doc(h.auth().currentUser.uid),r=n.collection("users").doc(t);a.update({connections:p.firestore.FieldValue.arrayUnion(t)}),r.update({connections:p.firestore.FieldValue.arrayUnion(h.auth().currentUser.uid)})}(0,e.id)}},e.connected?"Disconnect":"Connect"))))}var vt=n(266),Et=Object(Z.a)();Et=Object(vt.a)(Et);var yt=Object(P.a)((function(e){return{root:{display:"flex"},details:{display:"flex",flexDirection:"column",marginLeft:"2%",flexGrow:1},content:{flex:"1 0 auto",paddingBottom:0},cover:{minWidth:62,width:"25%",maxWidth:151}}}));function At(e){var t=yt(),n=r.a.useState(!1),a=Object(w.a)(n,2),o=a[0],i=a[1];return r.a.createElement(mt.a,{className:t.root},r.a.createElement(pt.a,{className:t.cover,image:e.img,title:"Avatar Image"}),r.a.createElement("div",{className:t.details},r.a.createElement(dt.a,{className:t.content},r.a.createElement(J.a,{theme:Et},r.a.createElement(j.a,{variant:"h6"},r.a.createElement("b",null," ",e.title," ")),r.a.createElement(j.a,{variant:"subtitle2",color:"textSecondary"},r.a.createElement("b",null," Interests ")," : ",e.likes))),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"flex-start"}},r.a.createElement(S.a,{"aria-label":"addPerson",style:{paddingTop:0},onClick:function(){i(!0)}},r.a.createElement(ft.a,{className:t.playIcon})))),r.a.createElement(bt,{open:o,handleClose:function(){i(!1)},img:e.img,title:e.title,connected:e.connected,favAlbum:e.favAlbum,favArtist:e.favArtist,interests:e.likes,id:e.id}))}function kt(){var e=h.firestore(),t=h.auth().currentUser,n=r.a.useState([]),o=Object(w.a)(n,2),i=o[0],l=o[1],c={marginBottom:"3%"};Object(a.useEffect)((function(){var n=e.collection("users").onSnapshot((function(e){var n=[];e.forEach((function(e){if(e.id!==t.uid&&!e.data().connections.includes(t.uid)){var a=e.data();a.id=e.id,n.push(a)}})),l(n)}));return function(){n()}}),[e,t]);var s=function(e){if(null==e)return"";var t="";return e.forEach((function(e){t+=e+" "})),t};return r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},i.map((function(e){return r.a.createElement("div",{style:c,key:e.id},r.a.createElement(At,{title:e.displayName,likes:s(e.interests),connected:!1,img:e.photoURL,favArtist:e.favArtist,favAlbum:e.favAlbum,id:e.id}))})))}var wt=n(63),xt=n(258),Ct=n(137),jt=n.n(Ct),St=n(254),Ot=n(257),Bt=n(256),It=n(255),Nt=Object(Z.a)();Nt=Object(vt.a)(Nt);var Tt=Object(P.a)((function(e){return{root:{display:"flex"},details:{display:"flex",flexDirection:"column",marginLeft:"2%",flexGrow:1},content:{flex:"1 0 auto",paddingBottom:0},cover:{minWidth:62,width:"20%",maxWidth:151},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)}}}));function Dt(e){var t=Tt(),n=r.a.useState(!1),a=Object(w.a)(n,2),o=a[0],i=a[1],l=r.a.useState(!1),c=Object(w.a)(l,2),s=c[0],u=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(mt.a,{className:t.root},r.a.createElement(pt.a,{className:t.cover,image:e.img,title:"Album Art",style:{width:"150px",height:"150px"}}),r.a.createElement("div",{className:t.details},r.a.createElement(dt.a,{className:t.content},r.a.createElement(J.a,{theme:Nt},r.a.createElement(j.a,{variant:"h6",style:{width:"300px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},r.a.createElement("b",null," ",e.title," ")),r.a.createElement(j.a,{variant:"subtitle2",color:"textSecondary"},r.a.createElement("b",null," Artist ")," : ",e.artist),e.album?r.a.createElement(j.a,{variant:"subtitle2",color:"textSecondary"},r.a.createElement("b",null," Album ")," : ",e.album):r.a.createElement("div",null))),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"flex-start"}},r.a.createElement(S.a,{"aria-label":"play/pause",style:{paddingTop:0},onClick:function(){i(!0)}},r.a.createElement(jt.a,{className:t.playIcon})),r.a.createElement(S.a,{"aria-label":"play/pause",style:{paddingTop:0},onClick:function(){u(!0)}},r.a.createElement(R.a,{className:t.playIcon})))),r.a.createElement(St.a,{open:o,onClose:function(){i(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement("iframe",{width:"600",height:"500",title:e.title,src:"https://embed.odesli.co/?url="+e.link+"&theme=dark",frameBorder:"0",allowtransparency:"true",allowFullScreen:!0,sandbox:"allow-same-origin allow-scripts allow-presentation allow-popups allow-popups-to-escape-sandbox"})),r.a.createElement(St.a,{open:s,onClose:function(){},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(It.a,{id:"alert-dialog-title"},"Share this song with your mates!"),r.a.createElement(Bt.a,null,e.connections.map((function(t){return r.a.createElement(K.a,{onClick:function(){var n,a;n=e.id,a=t.uid,h.firestore().collection("shares").add({reciever:a,sender:h.auth().currentUser.uid,spotifyID:n}).catch((function(e){alert(e)}))},key:t.uid},t.displayName)}))),r.a.createElement(Ot.a,null,r.a.createElement(K.a,{onClick:function(){u(!1)},color:"primary",autoFocus:!0},"Close")))))}var Ut=new Ve.a,Rt={marginBottom:"3%"},Ft=function(e){function t(e){var n,a;return Object(l.a)(this,t),n=Object(s.a)(this,Object(u.a)(t).call(this,e)),a=window.location.pathname.startsWith("/discover/token/")?window.location.pathname.replace("/discover/token/",""):window.location.pathname.replace("/discover/shared/",""),n.state={token:a,list:[],songIds:[],connections:[]},n.state.token&&Ut.setAccessToken(n.state.token),n.getTracks(),n.unSubConnections=null,n.unSubSongs=null,n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=h.firestore(),n=h.auth().currentUser;this.unSubConnections=t.collection("users").where("connections","array-contains",n.uid).onSnapshot((function(t){var n=[];t.forEach((function(e){var t={};t.displayName=e.data().displayName,t.uid=e.id,n.push(t)})),e.setState({connections:n})})),this.unSubSongs=t.collection("shares").where("reciever","==",h.auth().currentUser.uid).onSnapshot((function(t){var n=[];t.forEach((function(e){n.push(e.data().spotifyID)})),e.setState({songIds:n})}))}},{key:"componentWillUnmount",value:function(){this.unSubConnections(),this.unSubSongs()}},{key:"getTracks",value:function(){var e=this;Ut.getTracks(["0rKtyWc8bvkriBthvHKY8d"]).then((function(t){t.tracks.map((function(t){return e.setState((function(e){return{list:[].concat(Object(wt.a)(e.list),[{id:t.id,albumArt:t.album.images[0].url,albumName:t.album.name,songArtists:t.artists[0].name,songName:t.name,link:t.external_urls.spotify}])}}))}))}),(function(e){console.error(e)}))}},{key:"renderButton",value:function(e){return r.a.createElement(xt.a,{style:Rt},r.a.createElement(Dt,{id:e.id,title:e.songName,artist:e.songArtists,album:e.albumName,img:e.albumArt,link:e.link,connections:this.state.connections}))}},{key:"renderCards",value:function(){var e=this;return this.state.list.map((function(t){return e.renderButton(t)}))}},{key:"render",value:function(){return r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},this.renderCards())}}]),t}(r.a.Component),Lt=n(93),Pt=n.n(Lt),Yt=new Ve.a,zt={marginBottom:"3%"},Gt=function(e){function t(e){var n,a;return Object(l.a)(this,t),n=Object(s.a)(this,Object(u.a)(t).call(this,e)),a=window.location.pathname.startsWith("/discover/token/")?window.location.pathname.replace("/discover/token/",""):window.location.pathname.replace("/discover/music/",""),n.state={token:a,list:[],connections:[]},n.state.token&&Yt.setAccessToken(n.state.token),n.getRecom(),n.unSubConnections=null,n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=h.firestore(),n=h.auth().currentUser;this.unSubConnections=t.collection("users").where("connections","array-contains",n.uid).onSnapshot((function(t){var n=[];t.forEach((function(e){var t={};t.displayName=e.data().displayName,t.uid=e.id,n.push(t)})),e.setState({connections:n})}))}},{key:"componentWillUnmount",value:function(){this.unSubConnections()}},{key:"getTopArtists",value:function(){return[]}},{key:"getRecom",value:function(){var e=Object(k.a)(A.a.mark((function e(){var t,n,a,r,o=this;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){return(r=Object(k.a)(A.a.mark((function e(){var t,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){return(n=Object(k.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},t=function(){return n.apply(this,arguments)},window.gapi){e.next=4;break}return e.abrupt("return");case 4:if(window.gapi.auth2.getAuthInstance()){e.next=6;break}return e.abrupt("return");case 6:if(window.gapi.auth2.getAuthInstance().isSignedIn.get()){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,nt(!1);case 10:return e.abrupt("return",t());case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)},a=function(){return r.apply(this,arguments)},t=[],n=Yt.getMyTopArtists({limit:5}).then((function(e){e.items.map((function(e){return t.push(e.id)}))}),(function(e){console.error(e)})),e.prev=4,e.next=7,n;case 7:Yt.getRecommendations({seed_artists:t}).then((function(e){e.tracks.map((function(e){return o.setState((function(t){return{list:[].concat(Object(wt.a)(t.list),[{id:e.id,albumArt:e.album.images[0].url,albumName:e.album.name,songArtists:e.artists[0].name,songName:e.name,link:e.external_urls.spotify}])}}))}))}),(function(e){console.error(e)})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.error(e.t0);case 13:return e.next=15,a().then(function(){var e=Object(k.a)(A.a.mark((function e(t){var n,a,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=[]),Pt()("Rush").then(console.log),n=function(e){return Promise.resolve("ok")},a=function(){var e=Object(k.a)(A.a.mark((function e(t){var a,r,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt()(t.snippet.title.split(" -")[0],(function(e,t){return t}));case 2:return a=e.sent,e.next=5,Pt()(t.snippet.channelTitle,(function(e,t){return t}));case 5:return r=e.sent,i=t.snippet.thumbnails.default.url,a||(a=r)||(a=i),o.setState((function(e){return{list:[].concat(Object(wt.a)(e.list),[{albumArt:a,albumName:"",songArtists:t.snippet.channelTitle,songName:t.snippet.title.split("- ").pop(),link:"https://www.youtube.com/watch?v=".concat(t.id.videoId)}])}})),e.abrupt("return",n());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=Object(k.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map((function(e){return a(e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=7,r();case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"renderButton",value:function(e){return r.a.createElement(xt.a,{style:zt,key:e.id},r.a.createElement(Dt,{connections:this.state.connections,key:e.songName,title:e.songName,artist:e.songArtists,album:e.albumName,img:e.albumArt,link:e.link}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},this.state.list.map((function(t){return e.renderButton(t)})))}}]),t}(r.a.Component);function Wt(){var e=h.firestore(),t=h.auth().currentUser,n=r.a.useState([]),o=Object(w.a)(n,2),i=o[0],l=o[1];Object(a.useEffect)((function(){var n=e.collection("users").where("connections","array-contains",t.uid).onSnapshot((function(e){var t=[];e.forEach((function(e){var n=e.data();n.id=e.id,t.push(n)})),l(t)}));return function(){n()}}),[e,t]);var c=function(e){if(null==e)return"";var t="";return e.forEach((function(e){t+=e+" "})),t},s={marginBottom:"3%"};return r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},i.map((function(e){return r.a.createElement(xt.a,{style:s,key:e.id},r.a.createElement(At,{title:e.displayName,likes:c(e.interests),connected:!0,img:e.photoURL,favArtist:e.favArtist,favAlbum:e.favAlbum,id:e.id}))})))}var Mt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleDrawerToggle=function(){n.setState((function(e){return{mobileOpen:!e.mobileOpen}}))},n.handleSelection=function(e,t){n.setState((function(){return{selectedTag:t}}),(function(){!0===n.state.mobileOpen&&n.handleDrawerToggle()}))},n.state={mobileOpen:!1,primaryTags:["music","people","shared"],selectedTag:"music",token:window.location.pathname.replace("/discover/token/","")},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(E.a,null),r.a.createElement(Oe,{token:this.state.token,appBar:e.appBar,menuButton:e.menuButton,handleDrawerToggle:this.handleDrawerToggle}),r.a.createElement("nav",{className:e.drawer},r.a.createElement(ct,{token:this.state.token,type:"discover",container:e.container,open:this.state.mobileOpen,handleDrawerToggle:this.handleDrawerToggle,drawerPaper:e.drawerPaper,primaryTags:this.state.primaryTags,handleSelection:this.handleSelection,selectedTag:this.state.selectedTag}),r.a.createElement(st,{token:this.state.token,type:"discover",drawerPaper:e.drawerPaper,toolbar:e.toolbar,primaryTags:this.state.primaryTags,handleSelection:this.handleSelection,selectedTag:this.state.selectedTag})),r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.toolbar}),r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/discover/token/",component:Gt}),r.a.createElement(b.b,{path:"/discover/music/",component:Gt}),r.a.createElement(b.b,{path:"/discover/people",component:kt}),r.a.createElement(b.b,{path:"/discover/shared",component:Ft}),r.a.createElement(b.b,{path:"/discover/connections",component:Wt}))))}}]),t}(r.a.Component),Qt=Object(ut.a)((function(e){return{root:{display:"flex"},drawer:Object(v.a)({},e.breakpoints.up("sm"),{width:200,flexShrink:0}),appBar:{zIndex:e.zIndex.drawer+1},menuButton:Object(v.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:200,backgroundColor:"#292b2a",color:"white"},content:{flexGrow:1,padding:e.spacing(3)}}}),{withTheme:!0})(Mt),qt=n(138),Xt=n.n(qt),Kt=n(139),Ht=n.n(Kt),Vt=Object(P.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:"#292b2a",color:"rgba(255, 255, 255, 0.7)",border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),outline:"none"},button:{margin:e.spacing(1)}}})),Zt=Object(Z.a)({palette:{type:"dark"}});function Jt(e){var t=Vt(),n=r.a.useState(""),o=Object(w.a)(n,2),i=o[0],l=o[1],c=r.a.useState([]),s=Object(w.a)(c,2),u=s[0],m=s[1];return Object(a.useEffect)((function(){var t=h.firestore().collection("comments").where("postId","==",e.id).onSnapshot((function(e){var t=[],n=[];e.forEach((function(e){var a={};a.id=e.id,a.content=e.data().content,t.push(a);var r=e.data().userRef.get();n.push(r)})),Promise.all(n).then((function(e){for(var n=0;n<e.length;n++)t[n].author=e[n].data().displayName})),m(t)}));return function(){t()}}),[e.id]),r.a.createElement("div",null,r.a.createElement(Y.a,{className:t.modal,open:e.open,onClose:e.handleClose,closeAfterTransition:!0,BackdropComponent:z.a,BackdropProps:{timeout:500}},r.a.createElement(G.a,{in:e.open},r.a.createElement("div",{className:t.paper,style:{textAlign:"center",display:"flex",flexDirection:"column"}},r.a.createElement(J.a,{theme:Zt},r.a.createElement("h2",{style:{color:"#fff"}},"Comments"),r.a.createElement("div",{style:{textAlign:"left"}},u.map((function(e){return t=e.author,n=e.content,a=e.id,r.a.createElement("div",{key:a},r.a.createElement("h4",{style:{color:"white",marginBottom:"0.5em"}}," ",r.a.createElement("b",null,t)," "),r.a.createElement("p",{style:{marginTop:"0.5em"}}," ",n," "),r.a.createElement(Ue.a,null));var t,n,a}))),r.a.createElement("form",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onSubmit:function(t){t.preventDefault();var n=h.firestore();n.collection("comments").add({content:i,postId:e.id,userRef:n.doc("users/"+h.auth().currentUser.uid)}).then((function(e){l("")})).catch((function(e){console.log(e.message)}))}},r.a.createElement(_.a,{id:"standard-multiline-static",label:"Add comment",multiline:!0,style:{marginBottom:"4%",marginTop:"4%"},variant:"outlined",onChange:function(e){l(e.target.value)},value:i}),r.a.createElement(K.a,{variant:"contained",color:"secondary",type:"submit"},"Add Comment")))))))}var _t=Object(Z.a)();_t=Object(vt.a)(_t);var $t=Object(P.a)((function(e){return{root:{display:"flex"},details:{display:"flex",flexDirection:"column",marginLeft:"2%",flexGrow:1},content:{flex:"1 0 auto",paddingBottom:0},cover:{minWidth:62,width:"20%",maxWidth:151},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},button:{margin:e.spacing(0)}}}));function en(e){var t=$t(),n=r.a.useState(!1),a=Object(w.a)(n,2),o=a[0],i=a[1];return r.a.createElement(mt.a,{className:t.root},r.a.createElement(pt.a,{className:t.cover,image:e.img,title:"Avatar Image"}),r.a.createElement("div",{className:t.details},r.a.createElement(dt.a,{className:t.content},r.a.createElement(J.a,{theme:_t},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}},r.a.createElement(j.a,{variant:"h6"},r.a.createElement("b",null," ",e.title," ")),r.a.createElement(j.a,{variant:"caption"}," Tag: ",""===e.tag?"General":e.tag," ")),r.a.createElement("h5",null,r.a.createElement("b",null," ",e.content," ")))),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",flexWrap:"wrap-reverse"}},r.a.createElement("h5",null,e.count," likes "),r.a.createElement(S.a,{className:t.button,onClick:e.handleLike},r.a.createElement(Xt.a,null)),r.a.createElement(S.a,{className:t.button,onClick:function(){i(!0)}},r.a.createElement(Ht.a,null)))),r.a.createElement(Jt,{handleClose:function(){i(!1)},open:o,id:e.id}))}function tn(e){var t=Object(a.useState)([]),n=Object(w.a)(t,2),o=n[0],i=n[1],l=h.firestore(),c={marginBottom:"3%"};return Object(a.useEffect)((function(){var t;return t=null!=e.artist?l.collection("posts").where("tag","==",e.artist).onSnapshot((function(e){var t=[],n=[];e.forEach((function(e){var a=e.data();a.id=e.id;var r=l.collection("users").doc(a.uid).get();n.push(r),t.push(a)})),Promise.all(n).then((function(e){for(var n=0;n<e.length;n++)t[n].author=e[n].data().displayName,t[n].img=e[n].data().photoURL;i(t)})).catch((function(){alert("Error has occured when fetching users from feed data")}))})):l.collection("posts").onSnapshot((function(e){var t=[],n=[];e.forEach((function(e){var a=e.data();a.id=e.id;var r=l.collection("users").doc(a.uid).get();n.push(r),t.push(a)})),Promise.all(n).then((function(e){for(var n=0;n<e.length;n++)t[n].author=e[n].data().displayName,t[n].img=e[n].data().photoURL;i(t)})).catch((function(){alert("Error has occured when fetching users from feed data")}))})),function(){t()}}),[l,e.artist]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.map((function(e){return r.a.createElement(xt.a,{key:e.id,style:c},r.a.createElement(en,{title:e.author,content:e.content,img:e.img,count:e.likedBy.length,tag:e.tag,id:e.id,handleLike:function(t){return function(e,t){var n=h.auth().currentUser.uid;l.collection("posts").doc(t).get().then((function(e){if(null!==e){for(var a=e.data().likedBy,r=0;r<a.length;r++)if(a[r]===n)return;a.push(n),l.collection("posts").doc(t).update({likedBy:a}).catch((function(e){alert(e.message)}))}})).catch((function(e){alert(e.msg)}))}(0,e.id)}}))}))))}var nn=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=window.location.pathname,t=(e=e.split("/"))[3];return t=t.replace(/([A-Z])/g," $1").trim(),r.a.createElement(tn,{artist:t})}}]),t}(r.a.Component),an=Object(P.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginBottom:e.spacing(1),width:"25ch"}}}));function rn(e){var t=an(),n=Object(a.useState)(""),o=Object(w.a)(n,2),i=o[0],l=o[1],c=Object(a.useState)(""),s=Object(w.a)(c,2),u=s[0],m=s[1],d=h.firestore();return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={content:i,likedBy:[],tag:u,uid:h.auth().currentUser.uid};d.collection("posts").add(t).then((function(e){l(""),m(""),d.collection("users").doc(h.auth().currentUser.uid).update({posts:p.firestore.FieldValue.arrayUnion(e.id)})})).catch((function(e){alert(e.message)}))},style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(_.a,{id:"filled-full-width",label:"What's on your mind?",style:{margin:8},placeholder:"Share your thoughts...",helperText:"",fullWidth:!0,margin:"normal",multiline:!0,onChange:function(e){l(e.target.value)},InputLabelProps:{shrink:!0},variant:"filled",value:i}),r.a.createElement(_.a,{id:"filled-search",label:"Add an optional tag",type:"search",variant:"filled",className:t.textField,value:u,onChange:function(e){m(e.target.value)}}),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:"10px"}},r.a.createElement(K.a,{variant:"contained",color:"primary",type:"submit"},"Post!")))}function on(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(rn,null),r.a.createElement(tn,null))}var ln=new Ve.a,cn=function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleDrawerToggle=function(){n.setState((function(e){return{mobileOpen:!e.mobileOpen}}))},n.rerenderCallback=function(e){n.setState((function(t){return{artists:t.artists.concat(e)}}))},n.handleSelection=function(e,t){n.setState((function(){return{selectedTag:t}}),(function(){!0===n.state.mobileOpen&&n.handleDrawerToggle()}))};var a,r=window.location.pathname.replace("/home/","");return n.rerenderCallback=n.rerenderCallback.bind(Object(m.a)(n)),r.startsWith("token/")&&(a=r.replace("token/","")),n.state={mobileOpen:!1,selectedTag:"",artists:[],token:a,rerendering:!1},n.state.token&&ln.setAccessToken(n.state.token),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(E.a,null),r.a.createElement(Oe,{appBar:e.appBar,token:this.state.token,menuButton:e.menuButton,handleDrawerToggle:this.handleDrawerToggle}),r.a.createElement("nav",{className:e.drawer},r.a.createElement(ct,{type:"home",container:e.container,open:this.state.mobileOpen,handleDrawerToggle:this.handleDrawerToggle,drawerPaper:e.drawerPaper,primaryTags:this.state.token,handleSelection:this.handleSelection,rerenderCallback:this.rerenderCallback,state:this.state,selectedTag:this.state.selectedTag}),r.a.createElement(st,{type:"home",drawerPaper:e.drawerPaper,toolbar:e.toolbar,primaryTags:this.state.token,handleSelection:this.handleSelection,rerenderCallback:this.rerenderCallback,state:this.state,selectedTag:this.state.selectedTag})),r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.toolbar}),r.a.createElement(b.d,null,r.a.createElement(b.b,{path:["/home/token"],component:on}),r.a.createElement(b.b,{path:"/home/artist/",component:nn}))))}}]),t}(r.a.Component),sn=Object(ut.a)((function(e){return{root:{display:"flex"},drawer:Object(v.a)({},e.breakpoints.up("sm"),{width:200,flexShrink:0}),appBar:{zIndex:e.zIndex.drawer+1},menuButton:Object(v.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:200,backgroundColor:"#292b2a",color:"white"},content:{flexGrow:1,padding:e.spacing(3)}}}),{withTheme:!0})(cn),un=n(260),mn=n(140),dn=n.n(mn),pn=h,hn=h.firestore(),fn=["email","profile","https://www.googleapis.com/auth/youtube.readonly"],gn=["https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest"],bn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={gapiReady:!1,isSignedIn:!1,access_token:"",type:n.props.type,loading:!1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadYoutubeApi",value:function(){var e=this,t=document.createElement("script");t.src="https://apis.google.com/js/api.js",t.onload=function(){gapi.load("client:auth2",(function(){gapi.client.setApiKey("AIzaSyBhklDEhDYrLwf5mMkLKsA34Btqjpj8S7k"),gapi.client.load("youtube","v3",(function(){e.setState({gapiReady:!0})}))}))},document.body.appendChild(t)}},{key:"handleIsSignedIn",value:function(e){var t=this;if(!e){gapi.client.init({apiKey:"AIzaSyBhklDEhDYrLwf5mMkLKsA34Btqjpj8S7k",clientId:"542831090816-nvuicfih0d0ulh87cjinkfrmg1tlfciq.apps.googleusercontent.com",discoveryDocs:gn,scope:fn.join(" ")}),console.log("loaded firebase",0);var n=gapi.auth2.getAuthInstance();if(console.log(n.isSignedIn.get()),n.isSignedIn.get()){var a=n.currentUser.get().getAuthResponse(!0);this.setState({access_token:a.access_token}),console.log("already Signed In"),this.setState({isSignedIn:!0})}else n.signIn().then((function(){console.log("SIGNING IN");var e=n.currentUser.get();console.log("gapi: user signed in!");var a=e.getAuthResponse(!0),r=Je.a.auth.GoogleAuthProvider.credential(a.id_token,a.access_token);pn.auth().signInWithCredential(r).then((function(e){var t=e.user;hn.collection("users").doc(t.uid).get().then((function(e){e.exists||(console.log("Adding user data to firestore"),hn.collection("users").doc(t.uid).set({connections:[],displayName:t.displayName,favAlbum:"ASTROWORLD",favArtist:"Travis Scott",interests:["Hip Hop","Pop"],photoURL:t.photoURL,posts:[]},{merge:!0}).catch((function(e){console.log(e.message)})))}))})).then((function(){t.setState({access_token:a.access_token}),t.setState({isSignedIn:!0}),console.log("rerender")}))})).catch((function(e){console.log(e)}))}}},{key:"componentDidMount",value:function(){this.loadYoutubeApi()}},{key:"render",value:function(){return this.state.gapiReady?(this.state.loading||(this.setState({loading:!0}),console.log("handleSignIn"),this.handleIsSignedIn(this.state.isSignedIn)),r.a.createElement("div",{style:{color:"white"}},(!1===this.state.isSignedIn||this.state.access_token,r.a.createElement("div",null)))):r.a.createElement("div",null)}}]),t}(a.Component),vn=Object(Z.a)({palette:{type:"dark"}});function En(e){var t=r.a.useState(""),n=Object(w.a)(t,2),a=n[0],o=n[1],i=r.a.useState(""),l=Object(w.a)(i,2),c=l[0],s=l[1],u=r.a.useState(!1),m=Object(w.a)(u,2),d=m[0],p=m[1],g=function(e){e.preventDefault(),h.auth().signInWithEmailAndPassword(a,c).then((function(e){})).catch((function(e){alert(e.message)}))};return r.a.createElement(St.a,{open:e.inOpen,onClose:e.handleInClose,"aria-labelledby":"form-dialog-title",maxWidth:"xl"},r.a.createElement(J.a,{theme:vn},r.a.createElement(It.a,{id:"form-dialog-title",style:{backgroundColor:"#292b2a",color:"#ffffff"}},"Mosh"),r.a.createElement("form",{style:{backgroundColor:"#292b2a"},onSubmit:g},r.a.createElement(Bt.a,null,r.a.createElement(un.a,null,"Log in to Mosh."),r.a.createElement(_.a,{autoFocus:!0,margin:"dense",id:"name",label:"Email Address",type:"email",fullWidth:!0,onChange:function(e){o(e.target.value)}}),r.a.createElement(_.a,{id:"standard-password-input",label:"Password",type:"password",autoComplete:"current-password",onChange:function(e){s(e.target.value)}})),r.a.createElement(Ot.a,null,r.a.createElement(K.a,{onClick:e.handleInClose,color:"primary"},"Cancel"),r.a.createElement(K.a,{onClick:g,color:"primary",type:"submit"},"Log In")),r.a.createElement(Bt.a,null,r.a.createElement("div",{id:"firebaseui_container",lang:"en"},r.a.createElement("div",{className:"firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"},r.a.createElement("div",{className:"firebaseui-card-content"},r.a.createElement("ul",{className:"firebaseui-idp-list"},r.a.createElement("li",{className:"firebaseui-list-item"},r.a.createElement("button",{className:"firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised firebaseui-idp-google firebaseui-id-idp-button",onClick:function(e){e.preventDefault(),p(!0)},"data-provider-id":"google.com",style:{backgroundColor:"#ffffff"},"data-upgraded":",MaterialButton"},r.a.createElement("span",{className:"firebaseui-idp-icon-wrapper"},r.a.createElement("img",{className:"firebaseui-idp-icon",alt:"",src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"})),r.a.createElement("span",{className:"firebaseui-idp-text firebaseui-idp-text-long"},"Sign in with Google"),r.a.createElement("span",{className:"firebaseui-idp-text firebaseui-idp-text-short"},"Google"))))))),r.a.createElement(dn.a,{uiCallback:function(e){e.disableAutoSignIn()},uiConfig:f,firebaseAuth:h.auth()}),!0===d?r.a.createElement(bn,null):r.a.createElement("div",null)))))}var yn=Object(Z.a)({palette:{type:"dark"}});function An(e){var t=r.a.useState(""),n=Object(w.a)(t,2),a=n[0],o=n[1],i=r.a.useState(""),l=Object(w.a)(i,2),c=l[0],s=l[1],u=r.a.useState(""),m=Object(w.a)(u,2),d=m[0],p=m[1],f=function(e){e.preventDefault(),h.auth().createUserWithEmailAndPassword(a,c).then((function(e){h.auth().currentUser.updateProfile({displayName:d,photoURL:"https://iupac.org/wp-content/uploads/2018/05/default-avatar.png"}),h.firestore().collection("users").doc(h.auth().currentUser.uid).set({connections:[],displayName:d,favAlbum:"ASTROWORLD",favArtist:"Travis Scott",interests:["Hip Hop","Pop"],photoURL:"https://iupac.org/wp-content/uploads/2018/05/default-avatar.png",posts:[]},{merge:!0}).catch((function(e){console.log(e.message)}))})).catch((function(e){alert(e.message)}))};return r.a.createElement(St.a,{open:e.upOpen,onClose:e.handleUpClose,"aria-labelledby":"form-dialog-title",maxWidth:"xl"},r.a.createElement(J.a,{theme:yn},r.a.createElement("form",{style:{backgroundColor:"#292b2a"},onSubmit:f},r.a.createElement(It.a,{id:"form-dialog-title",style:{color:"#ffffff"}},"Mosh"),r.a.createElement(Bt.a,null,r.a.createElement(un.a,null,"We're excited to have you here. Sign Up to unlock a new music community."),r.a.createElement(un.a,null,"Sign Up to unlock a new music community."),r.a.createElement(_.a,{autoFocus:!0,id:"standard-required",label:"Name",type:"name",fullWidth:!0,onChange:function(e){p(e.target.value)}}),r.a.createElement(_.a,{id:"email",label:"Email Address",type:"email",fullWidth:!0,onChange:function(e){o(e.target.value)}}),r.a.createElement(_.a,{id:"standard-password-input",label:"Password",type:"password",autoComplete:"current-password",fullWidth:!0,onChange:function(e){s(e.target.value)}})),r.a.createElement(Ot.a,null,r.a.createElement(K.a,{onClick:e.handleUpClose,color:"primary"},"Cancel"),r.a.createElement(K.a,{onClick:f,color:"primary",type:"submit"},"Sign Up")))))}function kn(){var e=r.a.useState(!1),t=Object(w.a)(e,2),n=t[0],a=t[1],o=r.a.useState(!1),i=Object(w.a)(o,2),l=i[0],c=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{position:"fixed",style:{background:"#000000",opacity:"0.8",boxShadow:"none"}},r.a.createElement(C.a,null,r.a.createElement(j.a,{variant:"h6",style:{flexGrow:1}},r.a.createElement(g.b,{to:"/",style:{textDecoration:"none",color:"inherit "}},"Mosh")),r.a.createElement(K.a,{color:"inherit",style:{textTransform:"none"},onClick:function(){a(!0)}},"Sign In"),r.a.createElement(K.a,{color:"inherit",style:{textTransform:"none"},onClick:function(){c(!0)}},"Sign Up"))),r.a.createElement(En,{inOpen:n,handleInClose:function(){a(!1)}}),r.a.createElement(An,{upOpen:l,handleUpClose:function(){c(!1)}}))}var wn=n(91),xn=n.n(wn),Cn=n(142),jn=n.n(Cn),Sn=n(143),On=n.n(Sn),Bn=n(144),In=n.n(Bn),Nn={background:{backgroundImage:"url(".concat(xn.a,")"),height:"1200px",width:"100%",textAlign:"center",backgroundSize:"cover",backgroundAttachment:"fixed",backgroundRepeat:"no-repeat",backgroundPosition:"center"},divContainer:{fontFamily:"Lato",display:"flex",flexDirection:"column",justifyContent:"flex-start",color:"#FFFFFF",paddingTop:"15vh"},block:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"#000000",background:"rgba(196, 196, 196, 0.3)",borderRadius:"10px",width:"307px",height:"248px",left:"152px",top:"578px",paddingLeft:"2vw",paddingRight:"2vw",textAlign:"center",margin:"10px"},blockText:{margin:"2px"},blockRow:{display:"flex",flexWrap:"wrap",margin:"5vh",justifyContent:"center"},image:{width:"100px",height:"100px"}},Tn=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(kn,null),r.a.createElement("div",{style:Nn.background},r.a.createElement("div",{style:Nn.divContainer},r.a.createElement("div",null,r.a.createElement("h1",null,"Be with the crowd"),r.a.createElement("h1",null,"anywhere, anytime"),r.a.createElement("h3",null,"A social media focussed on connecting"),r.a.createElement("h3",null,"you to people through music")),r.a.createElement("div",{style:Nn.blockRow},r.a.createElement("div",{style:Nn.block},r.a.createElement("img",{style:Nn.image,src:jn.a,alt:""}),r.a.createElement("div",{style:Nn.blockText},r.a.createElement("h4",null,"A community built and growing through our love for music"))),r.a.createElement("div",{style:Nn.block},r.a.createElement("img",{style:Nn.image,src:In.a,alt:""}),r.a.createElement("div",{style:Nn.blockText},r.a.createElement("h4",null,"Keeps track of what you listen to and recommends, for your eyes only"))),r.a.createElement("div",{style:Nn.block},r.a.createElement("img",{style:Nn.image,src:On.a,alt:""}),r.a.createElement("div",{style:Nn.blockText},r.a.createElement("h4",null,"Connect your streaming accounts. Enjoy a cross-platform experience with your mates")))))))},Dn=n(145),Un=n.n(Dn),Rn=n(146),Fn=n.n(Rn),Ln=new Ve.a,Pn={divContainer:{fontFamily:"Lato",display:"flex",flexDirection:"column",justifyContent:"flex-start",color:"#FFFFFF",paddingTop:"15vh",alignItems:"center"},buttons:{display:"flex",flexDirection:"column"},background:{backgroundImage:"url(".concat(xn.a,")"),height:"1200px",width:"100%",textAlign:"center",backgroundSize:"cover",backgroundAttachment:"fixed",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},Yn=function(e){function t(){var e;Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).handleGoogleLogin=function(t){t.preventDefault(),e.setState({showLogin:!0})},e.renderGoogleBackgroundLogin=function(){return e.state.showLogin?r.a.createElement(bn,null):""};var n=e.getHashParams().access_token;return n&&Ln.setAccessToken(n),e.state={loggedIn:!!n,token:n,showLogin:!1},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getHashParams",value:function(){for(var e,t={},n=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);e=n.exec(a);)t[e[1]]=decodeURIComponent(e[2]);return t}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:Pn.background},r.a.createElement("div",{style:Pn.divContainer},r.a.createElement("h1",null,"MOSH"),r.a.createElement("h3",{style:{fontFamily:"Lato"}},"Connect your favourite streaming platforms for a more personal experience"),r.a.createElement("div",{style:Pn.buttons},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(K.a,{color:"inherit",style:{textTransform:"none",backgroundColor:"#000000",width:"40vw",margin:"10px"}},r.a.createElement("a",{href:"http://localhost:8888",style:{textDecoration:"none"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("img",{src:Un.a,alt:"",style:{paddingRight:"5vw"}}),r.a.createElement("h3",{style:{color:"#2D8642"}},"Connect with Spotify"))))),r.a.createElement(K.a,{color:"inherit",onClick:this.handleGoogleLogin,style:{textTransform:"none",backgroundColor:"#000000",width:"40vw",margin:"10px"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("img",{src:Fn.a,alt:"",style:{paddingRight:"5vw"}}),r.a.createElement("h3",{style:{color:"#E4321A"}},"Connect with YouTube"),!0===this.state.showLogin?r.a.createElement(bn,null):r.a.createElement("div",null)))),r.a.createElement("div",{style:{margin:"10px",display:"flex"}},r.a.createElement(K.a,{color:"inherit",style:{textTransform:"none",backgroundColor:"#000000",width:"20vw",margin:"10px"}},r.a.createElement(g.b,{to:"/home/token/",style:{textDecoration:"none",color:"inherit"}},"Skip for now")),r.a.createElement(K.a,{color:"inherit",style:{textTransform:"none",backgroundColor:"#000000",width:"20vw",margin:"10px"}},r.a.createElement(g.b,{to:"/home/token/"+this.state.token,style:{textDecoration:"none",color:"inherit"}},"Continue")),r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/home/token/",component:sn}))))))}}]),t}(r.a.Component),zn=n(238),Gn=n(265),Wn=n(261),Mn=n(239),Qn=new Ve.a,qn={divContainer:{fontFamily:"Lato",display:"flex",flexDirection:"column",justifyContent:"flex-start",color:"#FFFFFF",paddingTop:"15vh",alignItems:"center"}},Xn={margin:"10px",width:"80vw"},Kn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={token:window.location.pathname.replace("/share/token/",""),list:[],searchQuery:"",connections:[]},n.state.token&&Qn.setAccessToken(n.state.token),n.getSearch=n.getSearch.bind(Object(m.a)(n)),n.unSub=null,n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=h.firestore(),n=h.auth().currentUser;this.unSub=t.collection("users").where("connections","array-contains",n.uid).onSnapshot((function(t){var n=[];t.forEach((function(e){var t={};t.displayName=e.data().displayName,t.uid=e.id,n.push(t)})),e.setState({connections:n})}))}},{key:"componentWillUnmount",value:function(){this.unSub()}},{key:"getSearch",value:function(){var e=this;this.setState((function(e){return{list:[]}})),Qn.search(this.state.searchQuery,["track"]).then((function(t){t.tracks.items.map((function(t){return e.setState((function(e){return{list:[].concat(Object(wt.a)(e.list),[{id:t.id,albumArt:t.album.images[0].url,albumName:t.album.name,songArtists:t.artists[0].name,songName:t.name,link:t.external_urls.spotify}])}}))}))}))}},{key:"renderButton",value:function(e){return r.a.createElement(xt.a,{style:Xn,key:e.id},r.a.createElement(Dt,{id:e.id,title:e.songName,artist:e.songArtists,album:e.albumName,img:e.albumArt,link:e.link,connections:this.state.connections}))}},{key:"renderCards",value:function(){var e=this;return this.state.list.map((function(t){return e.renderButton(t)}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:qn.divContainer},r.a.createElement(Oe,{token:this.state.token}),r.a.createElement("div",{style:{paddingBottom:"2vh"}},r.a.createElement(Mn.a,null,r.a.createElement(Gn.a,{htmlFor:"input-with-icon-adornment",style:{color:"inherit"}},"Search for Music to Share"),r.a.createElement(zn.a,{id:"input-with-icon-adornment",style:{color:"inherit"},startAdornment:r.a.createElement(Wn.a,{position:"start"},r.a.createElement(N.a,null)),onChange:function(t){e.setState({searchQuery:t.target.value})}})),r.a.createElement(K.a,{onClick:function(){return e.getSearch()},style:{color:"inherit"}},"Search")),this.renderCards()))}}]),t}(r.a.Component),Hn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={user:null},n.authListener=n.authListener.bind(Object(m.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.authListener()}},{key:"authListener",value:function(){var e=this;h.auth().onAuthStateChanged((function(t){t?(console.log("User logged in"),e.setState({user:t}),localStorage.setItem("user",t.uid),e.setState({user:t})):(console.log("No user"),e.setState({user:null}),localStorage.removeItem("user"))}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(g.a,null,r.a.createElement(b.b,{exact:!0,path:"/"},null===this.state.user?r.a.createElement(Tn,null):r.a.createElement(b.a,{to:"/connect"})),r.a.createElement(b.b,{path:"/discover"},null!==this.state.user?r.a.createElement(Qt,null):r.a.createElement(b.a,{to:"/"})),r.a.createElement(b.b,{path:"/home"},null!==this.state.user?r.a.createElement(sn,null):r.a.createElement(b.a,{to:"/"})),r.a.createElement(b.b,{path:"/connect"},r.a.createElement(Yn,null)),r.a.createElement(b.b,{path:"/share"},null!==this.state.user?r.a.createElement(Kn,null):r.a.createElement(b.a,{to:"/"}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Vn=document.createElement("script");Vn.src="https://apis.google.com/js/api.js",Vn.onload=function(){gapi.load("client:auth2",(function(){gapi.client.setApiKey("AIzaSyBhklDEhDYrLwf5mMkLKsA34Btqjpj8S7k"),gapi.client.load("youtube","v3",(function(){}))})),console.log("gapi loaded")},document.body.appendChild(Vn),i.a.render(r.a.createElement(Hn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},91:function(e,t,n){e.exports=n.p+"static/media/landing_back.60a5d5ee.png"},97:function(e,t){e.exports="data:image/png;base64,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"}},[[165,1,2]]]);
//# sourceMappingURL=main.66b0f85a.chunk.js.map